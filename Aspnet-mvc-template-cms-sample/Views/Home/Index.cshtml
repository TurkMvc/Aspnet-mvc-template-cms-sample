@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<page-identity data-page-name="index"></page-identity>

@section PageHeader{

    <!-- Header Carousel -->
    <header id="myCarousel" class="carousel slide">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            <div class="item active">
                <div class="fill" style="background-image:url('http://placehold.it/1920x1080?text=One');"></div>
                <div class="carousel-caption">
                    <h2>Caption 1</h2>
                </div>
            </div>
            <div class="item">
                <div class="fill" style="background-image:url('http://placehold.it/1920x1080?text=Two');"></div>
                <div class="carousel-caption">
                    <h2>Caption 2</h2>
                </div>
            </div>
            <div class="item">
                <div class="fill" style="background-image:url('http://placehold.it/1920x1080?text=Three');"></div>
                <div class="carousel-caption">
                    <h2>Caption 3</h2>
                </div>
            </div>
        </div>
        <!-- Controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="icon-prev"></span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="icon-next"></span>
        </a>
    </header>

}


<!-- Page Content -->
<div class="container" id="marketing">
    <!-- Marketing Icons Section -->
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header" data-field-id="marketing_header">
                Welcome to Modern Business
            </h1>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4><i class="fa fa-fw fa-check"></i> <span data-field-id="marketing_box1_title">Bootstrap v3.3.7</span></h4>
                </div>
                <div class="panel-body">
                    <p data-field-id="marketing_box1_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque, optio corporis quae nulla aspernatur in alias at numquam rerum ea excepturi expedita tenetur assumenda voluptatibus eveniet incidunt dicta nostrum quod?</p>
                    <a data-field-id="marketing_box1_button" href="#" class="btn btn-default">Learn More</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4><i class="fa fa-fw fa-gift"></i> <span data-field-id="marketing_box2_title">Free &amp; Open Source</span></h4>
                </div>
                <div class="panel-body">
                    <p data-field-id="marketing_box2_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque, optio corporis quae nulla aspernatur in alias at numquam rerum ea excepturi expedita tenetur assumenda voluptatibus eveniet incidunt dicta nostrum quod?</p>
                    <a data-field-id="marketing_box2_button" href="#" class="btn btn-default">Learn More</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4><i class="fa fa-fw fa-compass"></i> <span data-field-id="marketing_box3_title">Easy to Use</span></h4>
                </div>
                <div class="panel-body">
                    <p data-field-id="marketing_box3_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque, optio corporis quae nulla aspernatur in alias at numquam rerum ea excepturi expedita tenetur assumenda voluptatibus eveniet incidunt dicta nostrum quod?</p>
                    <a data-field-id="marketing_box3_button" href="#" class="btn btn-default">Learn More</a>
                </div>
            </div>
        </div>
    </div>
    <!-- /.row -->
    <!-- Portfolio Section -->
    <div class="row" id="portfolio">
        <div class="col-lg-12">
            <h2 class="page-header" data-field-id="marketing_portfolio_header">Portfolio Heading</h2>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
        <div class="col-md-4 col-sm-6">
            <a href="portfolio-item.html">
                <img class="img-responsive img-portfolio img-hover" src="http://placehold.it/700x450" alt="">
            </a>
        </div>
    </div>
    <!-- /.row -->
    <!-- Features Section -->
    <div class="row" id="features">
        <div class="col-lg-12">
            <h2 class="page-header" data-field-id="marketing_features_title">Modern Business Features</h2>
        </div>
        <div class="col-md-6">
            <p data-field-id="marketing_features_text">The Modern Business template by Start Bootstrap includes:</p>
            <ul>
                <li data-field-id="marketing_features_item1">Bootstrap v3.3.7</li>
                <li data-field-id="marketing_features_item2">jQuery v1.11.1</li>
                <li data-field-id="marketing_features_item3">Font Awesome v4.2.0</li>
                <li data-field-id="marketing_features_item4">Working PHP contact form with validation</li>
                <li data-field-id="marketing_features_item5">Unstyled page elements for easy customization</li>
                <li data-field-id="marketing_features_item6">17 HTML pages</li>
            </ul>
            <p data-field-id="marketing_features_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corporis, omnis doloremque non cum id reprehenderit, quisquam totam aspernatur tempora minima unde aliquid ea culpa sunt. Reiciendis quia dolorum ducimus unde.</p>
        </div>
        <div class="col-md-6">
            <img class="img-responsive" src="http://placehold.it/700x450" alt="">
        </div>
    </div>
    <!-- /.row -->
    <hr>
    <!-- Call to Action Section -->
    <div class="well" id="calling">
        <div class="row">
            <div class="col-md-8">
                <p data-field-id="marketing_calling_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestias, expedita, saepe, vero rerum deleniti beatae veniam harum neque nemo praesentium cum alias asperiores commodi.</p>
            </div>
            <div class="col-md-4">
                <a class="btn btn-lg btn-default btn-block" data-field-id="marketing_calling_button" href="#">Call to Action</a>
            </div>
        </div>
    </div>

</div>
<!-- /.container -->
<!-- Script to Activate the Carousel -->
<script>
    $(function () {
        $('#myCarousel').carousel({
            interval: 5000 //changes the speed
        });

        $.fn.extend({
            pageCmsLoader: function () {
                cms_mode = false;
                cms_pname = $(this).data("page-name");

                $.ajax({
                    method: "GET",
                    url: "/Home/PageModelLoader",
                    data: { pname: cms_pname }
                }).done(function (data) {
                    cms_mode = data.EditMode;

                    $("*[data-field-id]").each(function (i, item) {
                        $(item).attr("contenteditable", cms_mode);

                        for (var i in data.PageFields) {
                            if (data.PageFields[i].Id == $(item).data("field-id")) {
                                $(item).html(data.PageFields[i].Text);
                                break;
                            }
                        }

                        if (cms_mode == true)
                        {
                            // in edit mode..
                            // Prevent anchors default behaivour.
                            if ($(item).attr("href") != null) {
                                $(item).attr("href", "return false;");
                            }

                            // Handle blur event for all page fields..
                            $(item).blur(function () {
                                var field_id = $(this).data("field-id");
                                var field_val = $(this).text();
                                var control = $(this);

                                $.ajax({
                                    method: "POST",
                                    url: "/Home/UpdateField",
                                    data: { id: field_id, val: field_val, pname: cms_pname }
                                }).done(function (res) {

                                    if (res.HasError == false) {
                                        control.css("opacity", 0);

                                        control.animate({
                                            opacity: 1
                                        }, 400);
                                    }
                                    else {
                                        alert(res.Message);
                                    }

                                }).fail(function (err) {
                                    alert("Error occured");
                                });
                            });
                        }

                    });

                }).fail(function (err) {
                    alert("Error occured");
                });
            }
        });

        $("page-identity").pageCmsLoader();
    });
</script>